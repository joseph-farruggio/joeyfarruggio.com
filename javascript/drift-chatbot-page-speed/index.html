<!doctype html><html lang="en-US" prefix="og: http://ogp.me/ns#"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="profile" href="https://gmpg.org/xfn/11"><meta name="ahrefs-site-verification" content="1885d91029cd4e08fc6cee892da93c5229abdde88773141429a500ae4acab341">  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-129275479-1"></script> <script>window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
		gtag('config', 'UA-129275479-1', {
			'custom_map': {'dimension2>': 'post_ID'}
		});
	  gtag('event', 'post_ID_dimension', {'post_ID': 563})</script> <meta name='robots' content='max-image-preview:large' /><title>Drift Chatbot – Optimize for Page Speed | Joey Farruggio</title><style id="rocket-critical-css">.mt-0{margin-top:0}.mb-0{margin-bottom:0}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-4{padding-right:1rem}.px-4{padding-left:1rem}.mb-20{margin-bottom:5rem}.text-center{text-align:center}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}a{background-color:transparent}img{border-style:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font-family:Loto,serif;font-size:125%;-webkit-font-smoothing:antialiased;color:#fff}p{line-height:1.5rem;margin-bottom:0}a{color:#2efff7;text-decoration:none}ul{margin-top:1.5rem;margin-bottom:1.5rem}ul li{line-height:1.5rem}h1{margin-top:1.5rem;line-height:1.5rem;color:#fff}h1{font-size:2.2624rem;line-height:3rem}h1{margin-top:3rem}html{-webkit-box-sizing:border-box;box-sizing:border-box}*,:after,:before{-webkit-box-sizing:inherit;box-sizing:inherit}body{background:#2f2f2f}img{height:auto;max-width:100%}.site-header .site-title{line-height:normal}.site-header .site-title a{color:#fff;text-decoration:none;font-size:1rem}.header-wrapper{background:#272727}@media (min-width:768px){.site-header{text-align:unset;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}}.menu{padding:0;margin:0}.menu li{list-style:none;display:inline-block}.menu a{padding:0 5px;font-size:1rem;color:#fff}.screen-reader-text{border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute!important;width:1px;word-wrap:normal!important}.container{width:100%;margin-left:auto;margin-right:auto;padding-left:15px;padding-right:15px}@media (min-width:576px){.container{max-width:576px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:992px){.container{max-width:800px}}.updated:not(.published){display:none}.entry-header{text-align:center}.entry-header h1{width:870px;max-width:100%;padding:0 40px;margin:4rem auto 10px}.entry-meta{font-size:.9rem;color:#fff}.entry-meta a{text-decoration:none;color:#fff}:root{--font-primary:"Lato",serif;--font-secondary:"Lato",sans-serif;--text-base-size:1.05em;--text-scale-ratio:1.2;--color:#aaa}body{font-family:var(--font-primary);color:#fff}body,p,ul{font-size:var(--text-base-size)}p,ul{line-height:1.6;color:var(--color)}.entry-content>*{color:#fff}.entry-content>ul{padding-left:80px}</style><meta name="description" content="Update July 9th 2020: I&#039;ve created a WP plugin called Chatbot Lazy Loader to handle the optimization of your chatbot. It even hit #3 on Product Hunt."/><meta name="robots" content="index,follow,max-snippet:-1,max-video-preview:-1,max-image-preview:large"/><link rel="canonical" href="index.html" /><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Drift Chatbot – Optimize for Page Speed | Joey Farruggio"><meta property="og:description" content="Update July 9th 2020: I&#039;ve created a WP plugin called Chatbot Lazy Loader to handle the optimization of your chatbot. It even hit #3 on Product Hunt."><meta property="og:url" content="https://joeyfarruggio.com/javascript/drift-chatbot-page-speed/"><meta property="og:site_name" content="Joey Farruggio"><meta property="article:section" content="Javascript"><meta property="og:updated_time" content="2020-07-09T18:04:02+00:00"><meta property="og:image" content="https://joeyfarruggio.com/wp-content/uploads/2020/07/chatbot-slide-1.png"><meta property="og:image:secure_url" content="https://joeyfarruggio.com/wp-content/uploads/2020/07/chatbot-slide-1.png"><meta property="og:image:width" content="1270"><meta property="og:image:height" content="760"><meta property="og:image:alt" content="Drift Chatbot – Optimize for Page Speed"><meta property="og:image:type" content="image/png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Drift Chatbot – Optimize for Page Speed | Joey Farruggio"><meta name="twitter:description" content="Update July 9th 2020: I&#039;ve created a WP plugin called Chatbot Lazy Loader to handle the optimization of your chatbot. It even hit #3 on Product Hunt."><meta name="twitter:image" content="https://joeyfarruggio.com/wp-content/uploads/2020/07/chatbot-slide-1.png"> <script type="application/ld+json">{"@context":"https:\/\/schema.org","@type":"BlogPosting","headline":"Drift Chatbot \u2013\u00a0Optimize for Page Speed","description":"Update July 9th 2020: I've created a WP plugin called Chatbot Lazy Loader to handle the optimization of your chatbot. It even hit #3 on Product Hunt. When","datePublished":"2020-07-01T16:20:29+00:00","dateModified":"2020-07-09T18:04:02+00:00","publisher":{"@type":"Organization","name":"Joey Farruggio","logo":{"@type":"ImageObject","url":"https:\/\/joeyfarruggio.com\/wp-content\/uploads\/2019\/12\/joey-farruggio-web-designer.jpg"}},"mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/joeyfarruggio.com\/javascript\/drift-chatbot-page-speed\/"},"author":{"@type":"Person","name":"Joey Farruggio"},"image":{"@type":"ImageObject","url":"https:\/\/joeyfarruggio.com\/wp-content\/uploads\/2020\/07\/chatbot-slide-1-1024x613.png","width":200,"height":200}}</script> <link rel='dns-prefetch' href='https://fonts.googleapis.com' /><link rel="alternate" type="application/rss+xml" title="Joey Farruggio &raquo; Feed" href="../../feed/index.rss" /><link rel="alternate" type="application/rss+xml" title="Joey Farruggio &raquo; Comments Feed" href="../../comments/feed/index.rss" /><link rel="alternate" type="application/rss+xml" title="Joey Farruggio &raquo; Drift Chatbot – Optimize for Page Speed Comments Feed" href="feed/index.rss" /><style type="text/css">img.wp-smiley,img.emoji{display:inline!important;border:none!important;box-shadow:none!important;height:1em!important;width:1em!important;margin:0 .07em!important;vertical-align:-0.1em!important;background:none!important;padding:0!important}</style><link rel='preload' id='wp-block-library-css'  href='../../wp-includes/css/dist/block-library/style.min%EF%B9%96ver=5.7.2.css' as="style" onload="this.onload=null;this.rel='stylesheet'" type='text/css' media='all' /><link data-minify="1" rel='preload' id='mkaz-code-syntax-css-css'  href='../../wp-content/cache/min/1/wp-content/plugins/code-syntax-block-master/assets/blocks.style-e7cf644e7cce785f6cd110ffc69b18f0.css' as="style" onload="this.onload=null;this.rel='stylesheet'" type='text/css' media='all' /><link data-minify="1" rel='preload' id='mkaz-code-syntax-prism-css-css'  href='../../wp-content/cache/min/1/wp-content/plugins/code-syntax-block-master/assets/prism/prism-356029979286f53b0235135985e726cc.css' as="style" onload="this.onload=null;this.rel='stylesheet'" type='text/css' media='all' /><link data-minify="1" rel='preload' id='bodhi-svgs-attachment-css'  href='../../wp-content/cache/min/1/wp-content/plugins/svg-support/css/svgs-attachment-422ce20bc5a3d1ae5694d72d9bd250b8.css' as="style" onload="this.onload=null;this.rel='stylesheet'" type='text/css' media='all' /><link data-minify="1" rel='preload' id='farruggio-theme-css'  href='../../wp-content/cache/min/1/wp-content/themes/josephallen/style-2b69c815fb68d6727b506afff2d675ea.css' as="style" onload="this.onload=null;this.rel='stylesheet'" type='text/css' media='all' /><link rel='preload' id='farruggio-style-css'  href='../../wp-content/themes/josephallen/dist/css/style.min%EF%B9%96ver=20190911.2.css' as="style" onload="this.onload=null;this.rel='stylesheet'" type='text/css' media='all' /><link rel='preload' id='google-fonts-css'  href='https://fonts.googleapis.com/css?family=Lato%3A300%2C400%2C700&amp;ver=20190320' as="style" onload="this.onload=null;this.rel='stylesheet'" type='text/css' media='all' /><link rel="https://api.w.org/" href="../../wp-json/index.json" /><link rel="alternate" type="application/json" href="../../wp-json/wp/v2/posts/563.json" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php%EF%B9%96rsd.html" /><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../wp-includes/wlwmanifest.xml" /><meta name="generator" content="WordPress 5.7.2" /><link rel='shortlink' href='index.html' /><link rel="alternate" type="application/json+oembed" href="../../wp-json/oembed/1.0/embed%EF%B9%96url=https%EF%B9%95%EA%A4%B7%EA%A4%B7joeyfarruggio.com%EA%A4%B7javascript%EA%A4%B7drift-chatbot-page-speed%EA%A4%B7.json" /><link rel="alternate" type="text/xml+oembed" href="../../wp-json/oembed/1.0/embed%EF%B9%96url=https%EF%B9%95%EA%A4%B7%EA%A4%B7joeyfarruggio.com%EA%A4%B7javascript%EA%A4%B7drift-chatbot-page-speed%EA%A4%B7&amp;format=xml.xml" /><link rel="pingback" href="../../xmlrpc.php.html"><style type="text/css">.recentcomments a{display:inline!important;padding:0!important;margin:0!important}</style><noscript><style id="rocket-lazyload-nojs-css">.rll-youtube-player,[data-lazy-src]{display:none!important}</style></noscript><script>/*! loadCSS rel=preload polyfill. [c]2017 Filament Group, Inc. MIT License */
(function(w){"use strict";if(!w.loadCSS){w.loadCSS=function(){}}
var rp=loadCSS.relpreload={};rp.support=(function(){var ret;try{ret=w.document.createElement("link").relList.supports("preload")}catch(e){ret=!1}
return function(){return ret}})();rp.bindMediaToggle=function(link){var finalMedia=link.media||"all";function enableStylesheet(){link.media=finalMedia}
if(link.addEventListener){link.addEventListener("load",enableStylesheet)}else if(link.attachEvent){link.attachEvent("onload",enableStylesheet)}
setTimeout(function(){link.rel="stylesheet";link.media="only x"});setTimeout(enableStylesheet,3000)};rp.poly=function(){if(rp.support()){return}
var links=w.document.getElementsByTagName("link");for(var i=0;i<links.length;i++){var link=links[i];if(link.rel==="preload"&&link.getAttribute("as")==="style"&&!link.getAttribute("data-loadcss")){link.setAttribute("data-loadcss",!0);rp.bindMediaToggle(link)}}};if(!rp.support()){rp.poly();var run=w.setInterval(rp.poly,500);if(w.addEventListener){w.addEventListener("load",function(){rp.poly();w.clearInterval(run)})}else if(w.attachEvent){w.attachEvent("onload",function(){rp.poly();w.clearInterval(run)})}}
if(typeof exports!=="undefined"){exports.loadCSS=loadCSS}
else{w.loadCSS=loadCSS}}(typeof global!=="undefined"?global:this))</script></head><body class="post-template-default single single-post postid-563 single-format-standard"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><div class="header-wrapper text-center"><header id="masthead" class="site-header container mx-auto px-4 py-2"><div class="site-branding"><h1 class="site-title mb-0 mt-0"><a href="../../index.html" rel="home">Joey Farruggio</a></h1></div><div><div class="menu-main-menu-container"><ul id="menu-main-menu" class="menu"><li id="menu-item-187" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-187"><a href="../../blog/index.html">Blog</a></li><li id="menu-item-301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-301"><a href="../../contact/index.html">Contact</a></li></ul></div></div></header></div><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><article id="post-563" class="post-563 post type-post status-publish format-standard hentry category-javascript"><header class="entry-header mb-20"><h1 class="entry-title text-indigo">Drift Chatbot – Optimize for Page Speed</h1><div class="entry-meta"> <span class="posted-on">Posted on <a href="index.html" rel="bookmark"><time class="entry-date published" datetime="2020-07-01T16:20:29+00:00">July 1, 2020</time><time class="updated" datetime="2020-07-09T18:04:02+00:00">July 9, 2020</time></a></span></div></header><div class="entry-content container"><p>Update July 9th 2020: I&#8217;ve created a WP plugin called <a href="https://chatbotspeed.com/" class="rank-math-link" target="_blank" rel="noopener">Chatbot Lazy Loader</a> to handle the optimization of your chatbot. It even hit #3 on Product Hunt.</p><div style="height:20px" aria-hidden="true" class="wp-block-spacer"></div><figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="613" src="../../wp-content/uploads/2020/07/chatbot-slide-1-1024x613.png" alt="" class="wp-image-593" srcset="../../wp-content/uploads/2020/07/chatbot-slide-1-1024x613.png 1024w, ../../wp-content/uploads/2020/07/chatbot-slide-1-300x180.png 300w, ../../wp-content/uploads/2020/07/chatbot-slide-1-768x460.png 768w, ../../wp-content/uploads/2020/07/chatbot-slide-1.png 1270w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure><div style="text-align: center;"><a href="https://www.producthunt.com/posts/chatbot-lazy-loader?utm_source=badge-top-post-badge&amp;utm_medium=badge&amp;utm_souce=badge-chatbot-lazy-loader" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://api.producthunt.com/widgets/embed-image/v1/top-post-badge.svg?post_id=213951&amp;theme=light&amp;period=daily" alt="Chatbot Lazy Loader - Eliminate page speed issues caused by chatbots on WordPress | Product Hunt Embed" style="width: 250px; height: 54px;" width="250px" height="54px"></a></div><div style="height:50px" aria-hidden="true" class="wp-block-spacer"></div><p>When we&#8217;re considering JS dependent functionality, we need to weight its benefits against its costs. Chat bots are powerful support and lead gen tools, but like any JavaScript resource it adds weight to your web page, slows TTI, and delays other resources from loading.</p><p>We should also consider smarter ways of including our JavaScript. The easiest optimization to make is to only include JavaScript on the pages that require it. That&#8217;s simple enough, right? But with Chatbots, it&#8217;s less of a <code>page specific issue</code> and a <code>timed intent issue</code>.</p><p>So if you want to keep your Drift chat bot, but avoid the hit to your page speed, here&#8217;s how to optimize the way you include Drift&#8217;s JavaScript.</p><h2>Put your visitors first</h2><p>Think of the way visitors are using your website. It&#8217;s a safe assumption to make that most visitors are not using a chatbot every time they view a page on your website. They are most likely going to hit an entry point, move through a flow, and at some point they may have a question that prompts them to use a chatbot.</p><p>So let&#8217;s not make them download that JavaScript when they don&#8217;t need it. Instead we can allow visitors to download that JavaScript on-demand, that is – only when they want to use the chatbot.</p><p>This is exactly what we did at <a href="https://www.bizrocket.net" class="rank-math-link" target="_blank" rel="noopener">Biz Rocket</a> when we first added Drift back in January. Drift later on released a <a href="https://gethelp.drift.com/hc/en-us/articles/360019504134-Drift-Load-Time-and-Supported-Browsers" class="rank-math-link" target="_blank" rel="noopener">tutorial</a> on how to do something similar to what we did.</p><h2>Drift&#8217;s standard install instructions</h2><p>When you create a Drift account, you&#8217;re given this JavaScript snippet with instructions to add it to the &lt;head&gt; of your website:</p><div style="height:20px" aria-hidden="true" class="wp-block-spacer"></div><pre title="Inline Drift JavaScript" class="wp-block-code"><code lang="javascript" class="language-javascript line-numbers">&lt;!-- Start of Async Drift Code -->
&lt;script>
"use strict";

!function() {
  var t = window.driftt = window.drift = window.driftt || [];
  if (!t.init) {
    if (t.invoked) return void (window.console &amp;&amp; console.error &amp;&amp; console.error("Drift snippet included twice."));
    t.invoked = !0, t.methods = [ "identify", "config", "track", "reset", "debug", "show", "ping", "page", "hide", "off", "on" ], 
    t.factory = function(e) {
      return function() {
        var n = Array.prototype.slice.call(arguments);
        return n.unshift(e), t.push(n), t;
      };
    }, t.methods.forEach(function(e) {
      t[e] = t.factory(e);
    }), t.load = function(t) {
      var e = 3e5, n = Math.ceil(new Date() / e) * e, o = document.createElement("script");
      o.type = "text/javascript", o.async = !0, o.crossorigin = "anonymous", o.src = "https://js.driftt.com/include/" + n + "/" + t + ".js";
      var i = document.getElementsByTagName("script")[0];
      i.parentNode.insertBefore(o, i);
    };
  }
}();
drift.SNIPPET_VERSION = '0.3.1';
drift.load('hrypg4pnzn33');
&lt;/script>
&lt;!-- End of Async Drift Code --></code></pre><p>This is the exact code that&#8217;s running at: <a href="https://www.bizrocket.net/drift-test-head/" target="_blank" rel="noopener">https://www.bizrocket.net/drift-test-head</a>. The code is added to the &lt;head&gt; of the document. That means that it&#8217;s render blocking and it will affect the page&#8217;s TTI.</p><p>I ran this test trough Lighthouse and this is what I got:</p><figure class="wp-block-image size-large"><img loading="lazy" width="770" height="1024" src="../../wp-content/uploads/2020/07/image-2-770x1024.png" alt="" class="wp-image-571" srcset="../../wp-content/uploads/2020/07/image-2-770x1024.png 770w, ../../wp-content/uploads/2020/07/image-2-226x300.png 226w, ../../wp-content/uploads/2020/07/image-2-768x1021.png 768w, ../../wp-content/uploads/2020/07/image-2.png 788w" sizes="(max-width: 770px) 100vw, 770px" /></figure><p>Not too impressive, especially since the the page is very thin and the rest of the site scores in the upper 90s/100.</p><p>So let&#8217;s see what we can do to improve things.</p><h2>Optimizing Drift for page speed</h2><p>Instead of loading that JavaScript on every page, let&#8217;s only add the JavaScript when someone clicks a &#8220;Chat with us&#8221; button.</p><h3>Step 1 –&nbsp;Add Drift&#8217;s JavaScript as a function</h3><div style="height:20px" aria-hidden="true" class="wp-block-spacer"></div><pre title="Custom Drift JavaScript" class="wp-block-code"><code lang="javascript" class="language-javascript line-numbers">function LoadDriftWidget(el) {
// Paste all of the JavaScript in here
}
</code></pre><p>Then, somewhere on your page add a button that, when clicked, calls the <code>LoadDriftWidget()</code> function.</p><div style="height:20px" aria-hidden="true" class="wp-block-spacer"></div><pre title="An HTML Button" class="wp-block-code"><code lang="markup" class="language-markup">&lt;button id="a-unique-id" onclick="LoadDriftWidget(this.id)">Let’s Chat&lt;/button></code></pre><p>Clicking that button will download the Drift JavaScript on-demand and then launch the chat widget. And this is great. It&#8217;s much better than what we had before.</p><p>But we can do better.</p><p>With that implementation, what happens when someone clicks the button?</p><ol><li>You click the button</li><li>Wait a second or so</li><li>Chat bot appears</li></ol><p>That&#8217;s fine if the chat bot appears very quickly, but if there&#8217;s even just a slight delay it may appear that the button is broken. What we want to do is give the visitor feedback so that they know that clicking the button worked and that the chat bot is loading.</p><h3>Step 2 &#8211; Provide feedback</h3><p>The HTML button should have a unique ID. That&#8217;s easy enough to automate in JavaScript or PHP. And we&#8217;ll use that ID when the visitor clicks the button:</p><div style="height:20px" aria-hidden="true" class="wp-block-spacer"></div><pre title="Adding a loading indicator" class="wp-block-code"><code lang="javascript" class="language-javascript line-numbers">// Code to run when a Drift button is clicked
function LoadDriftWidget(el) {
    // Get the initial button text and store it for later
    var text = document.getElementById(el).innerText;

    // Change the button text to a loading indicator
    document.getElementById(el).innerText = "loading...";

    // ... the rest of the Drift JavaScript

    // Once Drift is loaded and ready
    drift.on('ready', function(api, payload) {
       // Reset the button text to its initial state
      document.getElementById(el).innerText = text;
    }

}</code></pre><p>Now when someone clicks the button, the button text changes to &#8220;loading&#8230;&#8221; and as soon as the chatbot appears it changes back to its original state.</p><p>Again, much better. But I noticed one small hick up in this implementation. If someone were to click the chatbot a second time, after the script has already loaded, nothing happens. The Drift JavaScript has already been loaded, so there&#8217;s nothing we should expect this code to do.</p><h3>Step 3 – Launch the Drift sidebar</h3><p>Drift has example JavaScript to interact with the chat widget. One of the features is the ability to programmatically open and close the sidebar widget.</p><p>So here&#8217;s how I changed the code to open the sidebar widget if the chat button was clicked two or more times:</p><pre title="Open Drift Sidebar Widget" class="wp-block-code"><code lang="javascript" class="language-javascript line-numbers">// Initiate the counter
var i = 0;

// Code to run when a Drift button is clicked
function LoadDriftWidget(el) {
    // Increment the counter
    i++;
  
    // ... rest of the example JavaScript

    // Once Drift is loaded and ready
    drift.on('ready', function(api, payload) {
    
        // Reset the button text to its initial state
        document.getElementById(el).innerText = text;

        // If a Drift button is clicked more than once, open the chat sidebar
        // If this is not the first time the button was clicked, open the sidebar
        if (i >= 2) {
            api.sidebar.open();
        }
    });
});</code></pre><p>This is the exact code that I have running at <a href="https://www.bizrocket.net" class="rank-math-link" target="_blank" rel="noopener">Biz Rocket</a> and I created a separate page to compare against our first Lighthouse test: <a href="https://www.bizrocket.net/drift-test-optimized/" target="_blank" rel="noopener">https://www.bizrocket.net/drift-test-optimized/</a></p><figure class="wp-block-image alignwide size-large"><img loading="lazy" width="1024" height="663" src="../../wp-content/uploads/2020/07/image-6-1024x663.png" alt="" class="wp-image-577" srcset="../../wp-content/uploads/2020/07/image-6-1024x663.png 1024w, ../../wp-content/uploads/2020/07/image-6-300x194.png 300w, ../../wp-content/uploads/2020/07/image-6-768x497.png 768w, ../../wp-content/uploads/2020/07/image-6-1536x995.png 1536w, ../../wp-content/uploads/2020/07/image-6-2048x1327.png 2048w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure><p>Obviously that&#8217;s much better considering the fact that this was 3 minutes worth of work.</p><p>Here&#8217;s the final code in full:<br></p><pre title="Full Optimized Drift JavaScript" class="wp-block-code"><code lang="javascript" class="language-javascript line-numbers">"use strict";

// Initiate the counter
var i = 0;

// Code to run when a Drift button is clicked
function LoadDriftWidget(el) {
  // Increment the counter
  i++;
  
  // Get the intial button text
  var text = document.getElementById(el).innerText;

  // Change the button text to a loading indicator
  document.getElementById(el).innerText = "loading...";
  

  // Start Drift Widget Code
  var t = window.driftt = window.drift = window.driftt || [];
  if (!t.init) {
    if (t.invoked) {
      api.sidebar.open()
      return void (window.console &amp;&amp; console.error &amp;&amp; console.error("Drift snippet included twice."));
    }
    t.invoked = !0, t.methods = [ "identify", "config", "track", "reset", "debug", "show", "ping", "page", "hide", "off", "on" ], 
    t.factory = function(e) {
      return function() {
        var n = Array.prototype.slice.call(arguments);
        return n.unshift(e), t.push(n), t;
      };
    }, t.methods.forEach(function(e) {
      t[e] = t.factory(e);
    }), t.load = function(t) {
      var e = 3e5, n = Math.ceil(new Date() / e) * e, o = document.createElement("script");
      o.type = "text/javascript", o.async = !0, o.crossorigin = "anonymous", o.src = "https://js.driftt.com/include/" + n + "/" + t + ".js";
      var i = document.getElementsByTagName("script")[0];
      i.parentNode.insertBefore(o, i);
    };
  }
  
  drift.SNIPPET_VERSION = '0.3.1';
  // Add your own Drift ID here
  drift.load('XXXXXXXXXX');

  // Once Drift is loaded and ready
  drift.on('ready', function(api, payload) {
    
    // Reset the button text to its initial state
    document.getElementById(el).innerText = text;

    // If a Drift button is clicked more than once, open the chat sidebar
    if (i >= 2) {
      api.sidebar.open();
    }
  });
};
</code></pre></div><footer class="entry-footer container"> <span class="cat-links">Posted in <a href="../../category/javascript/index.html" rel="category tag">Javascript</a></span></footer></article><div class='container'><nav class="navigation post-navigation" role="navigation" aria-label="Posts"><h2 class="screen-reader-text">Post navigation</h2><div class="nav-links"><div class="nav-previous"><a href="../../wordpress/custom-post-loop-as-a-gutenberg-block/index.html" rel="prev">6-Step Guide To Custom Post Loop Gutenberg Blocks</a></div><div class="nav-next"><a href="../../wordpress/chatbot-lazy-loader-plugin/index.html" rel="next">Chatbot Lazy Loader Plugin</a></div></div></nav><div id="disqus_thread"></div></div></main></div></div><footer id="colophon" class="site-footer py-8"><div class="site-info container text-center"><p>Have questions? Email me at <a href="../../cdn-cgi/l/email-protection.html#acc6c3c9d5ecc6c3c9d5cacddeded9cbcbc5c382cfc3c1"><span class="__cf_email__" data-cfemail="7d171218043d171218041b1c0f0f081a1a1412531e1210">[email&#160;protected]</span></a>.</p></div></footer></div> <script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type='text/javascript' id='mkaz-code-syntax-prism-js-js-extra'>/* <![CDATA[ */ var prism_settings = {"pluginUrl":"https:\/\/joeyfarruggio.com\/wp-content\/plugins\/code-syntax-block-master\/"}; /* ]]> */</script> <script data-minify="1" type='text/javascript' src='../../wp-content/cache/min/1/wp-content/plugins/code-syntax-block-master/assets/prism/prism-8bcc1cf09d98f120eda88c80c6344deb.js' id='mkaz-code-syntax-prism-js-js' defer></script> <script type='text/javascript' id='disqus_count-js-extra'>/* <![CDATA[ */ var countVars = {"disqusShortname":"joeyfarruggio-com"}; /* ]]> */</script> <script data-minify="1" type='text/javascript' src='../../wp-content/cache/min/1/wp-content/plugins/disqus-comment-system/public/js/comment_count-58b13c41ca526f099518b0688573dbce.js' id='disqus_count-js' defer></script> <script type='text/javascript' id='disqus_embed-js-extra'>/* <![CDATA[ */ var embedVars = {"disqusConfig":{"integration":"wordpress 3.0.17"},"disqusIdentifier":"563 https:\/\/joeyfarruggio.com\/?p=563","disqusShortname":"joeyfarruggio-com","disqusTitle":"Drift Chatbot \u2013\u00a0Optimize for Page Speed","disqusUrl":"https:\/\/joeyfarruggio.com\/javascript\/drift-chatbot-page-speed\/","postId":"563"}; /* ]]> */</script> <script data-minify="1" type='text/javascript' src='../../wp-content/cache/min/1/wp-content/plugins/disqus-comment-system/public/js/comment_embed-031cf228a202197ebdbf7695eed049ed.js' id='disqus_embed-js' defer></script> <script type='text/javascript' src='../../wp-content/themes/josephallen/dist/js/toc.min%EF%B9%96ver=0.0.6.js' id='toc-js-js' defer></script> <script type='text/javascript' src='../../wp-includes/js/comment-reply.min%EF%B9%96ver=5.7.2.js' id='comment-reply-js' defer></script> <script type='text/javascript' src='../../wp-includes/js/wp-embed.min%EF%B9%96ver=5.7.2.js' id='wp-embed-js' defer></script> <noscript><link rel='stylesheet' id='wp-block-library-css'  href='../../wp-includes/css/dist/block-library/style.min%EF%B9%96ver=5.7.2.css' type='text/css' media='all' /></noscript><noscript><link data-minify="1" rel='stylesheet' id='mkaz-code-syntax-css-css'  href='../../wp-content/cache/min/1/wp-content/plugins/code-syntax-block-master/assets/blocks.style-e7cf644e7cce785f6cd110ffc69b18f0.css' type='text/css' media='all' /></noscript><noscript><link data-minify="1" rel='stylesheet' id='mkaz-code-syntax-prism-css-css'  href='../../wp-content/cache/min/1/wp-content/plugins/code-syntax-block-master/assets/prism/prism-356029979286f53b0235135985e726cc.css' type='text/css' media='all' /></noscript><noscript><link data-minify="1" rel='stylesheet' id='bodhi-svgs-attachment-css'  href='../../wp-content/cache/min/1/wp-content/plugins/svg-support/css/svgs-attachment-422ce20bc5a3d1ae5694d72d9bd250b8.css' type='text/css' media='all' /></noscript><noscript><link data-minify="1" rel='stylesheet' id='farruggio-theme-css'  href='../../wp-content/cache/min/1/wp-content/themes/josephallen/style-2b69c815fb68d6727b506afff2d675ea.css' type='text/css' media='all' /></noscript><noscript><link rel='stylesheet' id='farruggio-style-css'  href='../../wp-content/themes/josephallen/dist/css/style.min%EF%B9%96ver=20190911.2.css' type='text/css' media='all' /></noscript><noscript><link rel='stylesheet' id='google-fonts-css'  href='https://fonts.googleapis.com/css?family=Lato%3A300%2C400%2C700&amp;ver=20190320' type='text/css' media='all' /></noscript></body></html>
<!-- This website is like a Rocket, isn't it? Performance optimized by WP Rocket. Learn more: https://wp-rocket.me -->